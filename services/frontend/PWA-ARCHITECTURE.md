# Cinemart PWA Architecture

## ğŸ“ System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER DEVICES                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Android   â”‚     iOS     â”‚   Desktop   â”‚     Tablet           â”‚
â”‚   Chrome    â”‚   Safari    â”‚ Chrome/Edge â”‚    Various           â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚             â”‚              â”‚                  â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚         INSTALL PROMPT LAYER               â”‚
       â”‚  beforeinstallprompt Event Handler         â”‚
       â”‚  â€¢ Custom Install UI                       â”‚
       â”‚  â€¢ User Choice Tracking                    â”‚
       â”‚  â€¢ Platform Detection                      â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚         WEB APP MANIFEST                   â”‚
       â”‚         (manifest.json)                    â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
       â”‚  â”‚ â€¢ App Name & Description              â”‚ â”‚
       â”‚  â”‚ â€¢ Icons (16px - 512px)               â”‚ â”‚
       â”‚  â”‚ â€¢ Display Mode: standalone           â”‚ â”‚
       â”‚  â”‚ â€¢ Theme Colors                       â”‚ â”‚
       â”‚  â”‚ â€¢ Start URL & Scope                  â”‚ â”‚
       â”‚  â”‚ â€¢ Shortcuts                          â”‚ â”‚
       â”‚  â”‚ â€¢ Screenshots                        â”‚ â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚         SERVICE WORKER                     â”‚
       â”‚         (service-worker.js)                â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
       â”‚  â”‚  INSTALL EVENT                        â”‚ â”‚
       â”‚  â”‚  â€¢ Pre-cache critical assets          â”‚ â”‚
       â”‚  â”‚  â€¢ Setup initial cache                â”‚ â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
       â”‚  â”‚  ACTIVATE EVENT                       â”‚ â”‚
       â”‚  â”‚  â€¢ Clear old caches                   â”‚ â”‚
       â”‚  â”‚  â€¢ Take control of clients            â”‚ â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
       â”‚  â”‚  FETCH EVENT                          â”‚ â”‚
       â”‚  â”‚  â€¢ Cache-first for static assets      â”‚ â”‚
       â”‚  â”‚  â€¢ Network-first for API calls        â”‚ â”‚
       â”‚  â”‚  â€¢ Offline fallback                   â”‚ â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
       â”‚  â”‚  PUSH EVENT (Optional)                â”‚ â”‚
       â”‚  â”‚  â€¢ Show notifications                 â”‚ â”‚
       â”‚  â”‚  â€¢ Handle notification clicks         â”‚ â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
       â”‚  â”‚  SYNC EVENT (Optional)                â”‚ â”‚
       â”‚  â”‚  â€¢ Background data sync               â”‚ â”‚
       â”‚  â”‚  â€¢ Queue management                   â”‚ â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚         CACHE STORAGE                      â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
       â”‚  â”‚  STATIC CACHE (cinemart-v1)          â”‚ â”‚
       â”‚  â”‚  â€¢ HTML pages                        â”‚ â”‚
       â”‚  â”‚  â€¢ CSS stylesheets                   â”‚ â”‚
       â”‚  â”‚  â€¢ JavaScript bundles                â”‚ â”‚
       â”‚  â”‚  â€¢ Fonts                             â”‚ â”‚
       â”‚  â”‚  â€¢ Icons                             â”‚ â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
       â”‚  â”‚  RUNTIME CACHE (cinemart-runtime)    â”‚ â”‚
       â”‚  â”‚  â€¢ API responses                     â”‚ â”‚
       â”‚  â”‚  â€¢ Images (lot photos)               â”‚ â”‚
       â”‚  â”‚  â€¢ Dynamic content                   â”‚ â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚         NETWORK LAYER                      â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
       â”‚  â”‚   ONLINE     â”‚      OFFLINE           â”‚â”‚
       â”‚  â”‚              â”‚                        â”‚â”‚
       â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
       â”‚  â”‚ â”‚  Fetch   â”‚ â”‚ â”‚  Serve from Cache  â”‚â”‚â”‚
       â”‚  â”‚ â”‚  Fresh   â”‚ â”‚ â”‚  or                â”‚â”‚â”‚
       â”‚  â”‚ â”‚  Data    â”‚ â”‚ â”‚  Show offline.html â”‚â”‚â”‚
       â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚         CINEMART APPLICATION               â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
       â”‚  â”‚  FRONTEND (React + TypeScript)       â”‚ â”‚
       â”‚  â”‚  â€¢ Pages & Components                â”‚ â”‚
       â”‚  â”‚  â€¢ Zustand State Management          â”‚ â”‚
       â”‚  â”‚  â€¢ Real-time Bidding UI              â”‚ â”‚
       â”‚  â”‚  â€¢ Auction Listings                  â”‚ â”‚
       â”‚  â”‚  â€¢ User Dashboard                    â”‚ â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
       â”‚  â”‚  BACKEND APIs                        â”‚ â”‚
       â”‚  â”‚  â€¢ Listings Service                  â”‚ â”‚
       â”‚  â”‚  â€¢ Bid Service                       â”‚ â”‚
       â”‚  â”‚  â€¢ Auth Service                      â”‚ â”‚
       â”‚  â”‚  â€¢ Payment Service                   â”‚ â”‚
       â”‚  â”‚  â€¢ Profile Service                   â”‚ â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Request Flow Diagrams

### 1. First Visit (Online)

```
User enters URL
      â”‚
      â–¼
Browser loads page
      â”‚
      â–¼
HTML parsed
      â”‚
      â”œâ”€â”€â”€ Manifest linked
      â”‚         â”‚
      â”‚         â–¼
      â”‚    Browser downloads manifest.json
      â”‚         â”‚
      â”‚         â–¼
      â”‚    Install prompt eligible
      â”‚         â”‚
      â”‚         â–¼
      â”‚    Show install banner (after 30s)
      â”‚
      â”œâ”€â”€â”€ Service Worker registration
      â”‚         â”‚
      â”‚         â–¼
      â”‚    Browser downloads service-worker.js
      â”‚         â”‚
      â”‚         â–¼
      â”‚    SW installs & activates
      â”‚         â”‚
      â”‚         â–¼
      â”‚    Pre-cache critical assets
      â”‚
      â””â”€â”€â”€ Assets loaded normally from network
                â”‚
                â–¼
           Page fully rendered
                â”‚
                â–¼
           User interacts
```

### 2. Returning Visit (Online, SW Active)

```
User opens app
      â”‚
      â–¼
Service Worker intercepts request
      â”‚
      â”œâ”€â”€â”€ HTML request
      â”‚         â”‚
      â”‚         â”œâ”€â”€â”€ Check cache
      â”‚         â”‚         â”‚
      â”‚         â”‚         â”œâ”€â”€â”€ Found: Return cached
      â”‚         â”‚         â”‚
      â”‚         â”‚         â””â”€â”€â”€ Not found: Fetch from network
      â”‚         â”‚
      â”‚         â””â”€â”€â”€ Store in cache
      â”‚
      â”œâ”€â”€â”€ Static assets (CSS, JS, fonts)
      â”‚         â”‚
      â”‚         â””â”€â”€â”€ Cache-first strategy
      â”‚                   â”‚
      â”‚                   â””â”€â”€â”€ Return from cache instantly
      â”‚
      â”œâ”€â”€â”€ API requests
      â”‚         â”‚
      â”‚         â””â”€â”€â”€ Network-first strategy
      â”‚                   â”‚
      â”‚                   â”œâ”€â”€â”€ Try network
      â”‚                   â”‚         â”‚
      â”‚                   â”‚         â”œâ”€â”€â”€ Success: Update cache
      â”‚                   â”‚         â”‚
      â”‚                   â”‚         â””â”€â”€â”€ Fail: Return cached
      â”‚                   â”‚
      â”‚                   â””â”€â”€â”€ Update cache in background
      â”‚
      â””â”€â”€â”€ Images
                â”‚
                â””â”€â”€â”€ Stale-while-revalidate
                          â”‚
                          â”œâ”€â”€â”€ Return cached immediately
                          â”‚
                          â””â”€â”€â”€ Fetch fresh in background
```

### 3. Offline Visit

```
User opens app (no connection)
      â”‚
      â–¼
Service Worker intercepts
      â”‚
      â–¼
Network unavailable detected
      â”‚
      â”œâ”€â”€â”€ Cached page available?
      â”‚         â”‚
      â”‚         â”œâ”€â”€â”€ YES: Return cached page
      â”‚         â”‚         â”‚
      â”‚         â”‚         â””â”€â”€â”€ Page loads instantly
      â”‚         â”‚
      â”‚         â””â”€â”€â”€ NO: Return offline.html
      â”‚                   â”‚
      â”‚                   â””â”€â”€â”€ Show offline message
      â”‚
      â””â”€â”€â”€ Static assets from cache
                â”‚
                â””â”€â”€â”€ Full functionality for cached content
```

### 4. Install Flow

```
User visits Cinemart
      â”‚
      â–¼
beforeinstallprompt event fires
      â”‚
      â”œâ”€â”€â”€ Prevent default
      â”‚
      â”œâ”€â”€â”€ Store event
      â”‚
      â””â”€â”€â”€ Show custom install button
                â”‚
                â–¼
       User clicks "Install"
                â”‚
                â–¼
       Show browser install prompt
                â”‚
                â”œâ”€â”€â”€ User accepts
                â”‚         â”‚
                â”‚         â–¼
                â”‚    App installed
                â”‚         â”‚
                â”‚         â”œâ”€â”€â”€ Icon added to home screen
                â”‚         â”‚
                â”‚         â”œâ”€â”€â”€ appinstalled event fires
                â”‚         â”‚
                â”‚         â””â”€â”€â”€ Track in analytics
                â”‚
                â””â”€â”€â”€ User dismisses
                          â”‚
                          â””â”€â”€â”€ 90-day cooldown period
```

### 5. Update Flow

```
Service Worker checks for updates
      â”‚
      â–¼
New version found
      â”‚
      â–¼
Download new service-worker.js
      â”‚
      â–¼
New SW enters "waiting" state
      â”‚
      â”œâ”€â”€â”€ Old SW still active
      â”‚
      â””â”€â”€â”€ Show update notification to user
                â”‚
                â–¼
       User clicks "Update Now"
                â”‚
                â–¼
       Send SKIP_WAITING message
                â”‚
                â–¼
       New SW activates
                â”‚
                â”œâ”€â”€â”€ Clear old caches
                â”‚
                â””â”€â”€â”€ Reload page
                          â”‚
                          â–¼
                     New version active
```

## ğŸ—‚ï¸ Caching Strategies

### Cache-First (Static Assets)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Request   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check Cache â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
   â”Œâ”€â”€â”€â”´â”€â”€â”€â”
   â”‚       â”‚
Found    Not Found
   â”‚       â”‚
   â”‚       â–¼
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  â”‚  Fetch   â”‚
   â”‚  â”‚ Network  â”‚
   â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
   â”‚       â”‚
   â”‚       â–¼
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  â”‚  Store   â”‚
   â”‚  â”‚  Cache   â”‚
   â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
   â”‚       â”‚
   â””â”€â”€â”€â”¬â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Return    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Network-First (API Calls)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Request   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Try Network â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
   â”Œâ”€â”€â”€â”´â”€â”€â”€â”
   â”‚       â”‚
Success  Failure
   â”‚       â”‚
   â”‚       â–¼
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  â”‚  Check   â”‚
   â”‚  â”‚  Cache   â”‚
   â”‚  â”‚          â”‚
   â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
   â”‚       â”‚
   â”‚       â”‚
   â””â”€â”€â”€â”¬â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Return    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Data Flow

### Bidding with Offline Support

```
User places bid
      â”‚
      â–¼
Check network status
      â”‚
   â”Œâ”€â”€â”´â”€â”€â”
   â”‚     â”‚
Online  Offline
   â”‚     â”‚
   â”‚     â””â”€â”€â”€ Store in IndexedDB
   â”‚           â”‚
   â”‚           â””â”€â”€â”€ Queue for sync
   â”‚                 â”‚
   â”‚                 â””â”€â”€â”€ Show pending indicator
   â”‚
   â””â”€â”€â”€ Send to API immediately
              â”‚
              â–¼
         Update UI
              â”‚
              â–¼
         Cache response
              â”‚
              â–¼
    Background sync (when online)
              â”‚
              â””â”€â”€â”€ Process queued bids
```

## ğŸ”” Push Notification Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         SERVER                        â”‚
â”‚  Auction Event Occurs                 â”‚
â”‚  (User outbid, auction ending, etc.)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Push Notification Service           â”‚
â”‚  (Firebase, VAPID, etc.)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Service Worker                       â”‚
â”‚  push event listener                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Show Notification                    â”‚
â”‚  â€¢ Title: "You've been outbid!"      â”‚
â”‚  â€¢ Body: "Lot #47 - â‚¹8,50,000"       â”‚
â”‚  â€¢ Icon: Cinemart logo               â”‚
â”‚  â€¢ Actions: [Bid, View]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
       User clicks notification
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Service Worker                       â”‚
â”‚  notificationclick listener           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Open App                             â”‚
â”‚  Navigate to relevant page            â”‚
â”‚  (e.g., /lot/47)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—ï¸ Component Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CINEMART PWA                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              PRESENTATION LAYER                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  React Components                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Homepage                                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Catalog                                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Live Auctions                                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Lot Detail                                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Dashboard                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Authentication                                 â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              STATE MANAGEMENT LAYER                    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Zustand Stores                                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Auth Store                                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Bid Store                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Listing Store                                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Watchlist Store                                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Notification Store                             â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              SERVICE LAYER                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  API Services                                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ listingsService                                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ bidService                                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ authService                                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ paymentService                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ profileService                                 â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              PWA LAYER                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Service Worker (caching, offline)             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Manifest (app config)                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Install Prompt Handler                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Push Notification Manager                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Background Sync                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Cache Manager                                 â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              NETWORK LAYER                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  HTTP Client (Fetch API)                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Request interceptors                          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Response interceptors                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Error handling                                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Retry logic                                   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Key Integration Points

### 1. App Entry Point (`src/index.tsx`)
```typescript
// Register service worker
registerServiceWorker();

// Setup install prompt
setupInstallPrompt();

// Initialize app
ReactDOM.render(<App />, document.getElementById('root'));
```

### 2. Service Worker (`public/service-worker.js`)
- Caches critical assets on install
- Intercepts fetch requests
- Provides offline fallback
- Handles push notifications

### 3. Manifest (`public/manifest.json`)
- Defines app metadata
- Lists all icons
- Configures display settings
- Sets up shortcuts

### 4. HTML Template
- Links manifest
- Sets theme colors
- Includes meta tags for iOS
- Provides favicon links

## ğŸ“± Platform-Specific Behaviors

| Feature | Android | iOS | Desktop |
|---------|---------|-----|---------|
| Install Prompt | Auto | Manual | Auto |
| Standalone Mode | âœ… | âœ… | âœ… |
| Push Notifications | âœ… | âŒ* | âœ… |
| Background Sync | âœ… | âŒ | âœ… |
| Add to Home Screen | âœ… | âœ… | âœ… |
| Splash Screen | âœ… | Custom | âœ… |
| Theme Color | âœ… | Partial | âœ… |

*iOS supports push notifications only for apps in App Store

---

**This architecture enables Cinemart to deliver a seamless, app-like experience across all devices while maintaining a single codebase.**

âœ¦ âœ¦ âœ¦
